**注册变量 用户输入变量**：有时候需要将上一个任务的返回值作为条件再决定是否执行下一个任务，也有时候需要用户自己输入一些变量值，比如用户名等。也可以在
剧本中先定义需要的变量的名字，在执行剧本的时候，提供变量：--extra-vars=或者-e ""

```
可以获得变量的所有信息，也可以单独获取某个信息
[root@ansible-k8s1 data]# ansible-playbook  --syntax-check test.yaml

playbook: test.yaml
[root@ansible-k8s1 data]# ansible-playbook  test.yaml

PLAY [test1] *********************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************
ok: [test1]

TASK [task1] *********************************************************************************************************************************
changed: [test1]

TASK [return values] *************************************************************************************************************************
ok: [test1] => {
    "testvar": {
        "changed": true,
        "cmd": "echo test>/data/test",
        "delta": "0:00:00.003341",
        "end": "2018-10-06 13:51:04.639361",
        "failed": false,
        "rc": 0,
        "start": "2018-10-06 13:51:04.636020",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}

PLAY RECAP ***********************************************************************************************************************************
test1                      : ok=3    changed=1    unreachable=0    failed=0

[root@ansible-k8s1 data]# cat test.yaml
---
- hosts: test1
  remote_user: root
  tasks:
  - name: task1
    shell: "echo test>/data/test"
    register: testvar
  - name: return values
    debug:
      msg: "{{ testvar.changed }}"

[root@ansible-k8s1 data]# ansible-playbook  test.yaml

PLAY [test1] *********************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************
ok: [test1]

TASK [task1] *********************************************************************************************************************************
changed: [test1]

TASK [return values] *************************************************************************************************************************
ok: [test1] => {
    "msg": true
}

PLAY RECAP ***********************************************************************************************************************************
test1                      : ok=3    changed=1    unreachable=0    failed=0
```
用户输入变量值

```
[root@ansible-k8s1 data]# cat prompt-test.yaml
---
- hosts: test1
  remote_user: root
  vars_prompt:
  - name: "your_name"
    prompt: "your_name"
  tasks:
  - name: output vars
    debug:
      msg: name is {{ your_name }}
[root@ansible-k8s1 data]# ansible-playbook prompt-test.yaml
your_name:

PLAY [test1] *********************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************
ok: [test1]

TASK [output vars] ***************************************************************************************************************************
ok: [test1] => {
    "msg": "name is huahua"
}

PLAY RECAP ***********************************************************************************************************************************
test1                      : ok=2    changed=0    unreachable=0    failed=0

显示用户输入
[root@ansible-k8s1 data]# ansible-playbook prompt-test.yaml
your_name: huahua

PLAY [test1] *********************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************
ok: [test1]

TASK [output vars] ***************************************************************************************************************************
ok: [test1] => {
    "msg": "name is huahua"
}

PLAY RECAP ***********************************************************************************************************************************
test1                      : ok=2    changed=0    unreachable=0    failed=0

设置默认值
[root@ansible-k8s1 data]# cat prompt-test.yaml
---
- hosts: test1
  remote_user: root
  vars_prompt:
  - name: "your_name"
    prompt: "your_name"
    private: no
    default: test
  tasks:
  - name: output vars
    debug:
      msg: name is {{ your_name }}
[root@ansible-k8s1 data]# ansible-playbook prompt-test.yaml
your_name [test]:

PLAY [test1] *********************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************
ok: [test1]

TASK [output vars] ***************************************************************************************************************************
ok: [test1] => {
    "msg": "name is test"
}

PLAY RECAP ***********************************************************************************************************************************
test1                      : ok=2    changed=0    unreachable=0    failed=0

在创建用户时，用户的密码(user模块)，可以哈希encrypt: "sha512_crypt"，使用confirm让用户确认密码

```

